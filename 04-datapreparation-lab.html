<!DOCTYPE html>
<html lang="en"><head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="04-datapreparation-lab_files/libs/quarto-html/tabby.min.js"></script>
<script src="04-datapreparation-lab_files/libs/quarto-html/popper.min.js"></script>
<script src="04-datapreparation-lab_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="04-datapreparation-lab_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="04-datapreparation-lab_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="04-datapreparation-lab_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <meta name="author" content="Matteo Francia   DISI — University of Bologna   m.francia@unibo.it">
  <title>The United States Counties case study</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="04-datapreparation-lab_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="04-datapreparation-lab_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="04-datapreparation-lab_files/libs/revealjs/dist/theme/quarto-6391498a111a1f00b0d941bda0c7e264.css">
  <link href="04-datapreparation-lab_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="04-datapreparation-lab_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="04-datapreparation-lab_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="04-datapreparation-lab_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">The <code>United States Counties</code> case study</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Matteo Francia <br> DISI — University of Bologna <br> m.francia@unibo.it 
</div>
</div>
</div>

</section>
<section id="the-united-states-counties-case-study" class="title-slide slide level1 center">
<h1>The <code>United States Counties</code> case study</h1>
<p>During the 2020 US presidential election, the world and America alike were reminded that where an individual lives can best predict what they will decide for their future (that is, how they vote).</p>
<p>We will use the following data sources to create a dataset that allows us to perform voting analysis:</p>
<ol type="1">
<li><p>The US Department of Agriculture Economic Research Service (USDA ERS) <a href="https://www.ers.usda.gov/data-products/county-level-data-sets/">https://www.ers.usda.gov/data-products/county-level-data-sets/</a> produces four datasets</p>
<ol type="1">
<li><code>Education.xls</code>,</li>
<li><code>PopulationEstimates.xls</code>,</li>
<li><code>PovertyEstimates.xls</code>, and</li>
<li><code>Unemployment.xlsx</code></li>
</ol></li>
<li><p>The US election results from Massachusetts Institute of Technology (MIT) election data <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/VOQCHQ">https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/VOQCHQ</a></p></li>
</ol>
<p>We will eventually integrate all this data into a single table.</p>
<p>However, how do we do so?</p>
</section>

<section id="data-integration" class="title-slide slide level1 center">
<h1>Data integration</h1>

<img data-src="./img/datapreprocessing/integration.svg" class="r-stretch"></section>

<section id="election-data" class="title-slide slide level1 center">
<h1>Election data</h1>
<div id="cell-5" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.159399Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.158925Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.246584Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.246021Z&quot;}" data-execution_count="2">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb1-1"><a href=""></a>election_df <span class="op">=</span> pd.read_csv(<span class="st">'./datasets/census/countypres_2000-2020.csv'</span>)</span>
<span id="cb1-2"><a href=""></a>election_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">state_po</th>
<th data-quarto-table-cell-role="th">county_name</th>
<th data-quarto-table-cell-role="th">county_fips</th>
<th data-quarto-table-cell-role="th">office</th>
<th data-quarto-table-cell-role="th">candidate</th>
<th data-quarto-table-cell-role="th">party</th>
<th data-quarto-table-cell-role="th">candidatevotes</th>
<th data-quarto-table-cell-role="th">totalvotes</th>
<th data-quarto-table-cell-role="th">version</th>
<th data-quarto-table-cell-role="th">mode</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>AUTAUGA</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>AL GORE</td>
<td>DEMOCRAT</td>
<td>4942.0</td>
<td>17208.0</td>
<td>20191203</td>
<td>TOTAL</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>AUTAUGA</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>GEORGE W. BUSH</td>
<td>REPUBLICAN</td>
<td>11993.0</td>
<td>17208.0</td>
<td>20191203</td>
<td>TOTAL</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>AUTAUGA</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>RALPH NADER</td>
<td>GREEN</td>
<td>160.0</td>
<td>17208.0</td>
<td>20191203</td>
<td>TOTAL</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>AUTAUGA</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>OTHER</td>
<td>OTHER</td>
<td>113.0</td>
<td>17208.0</td>
<td>20191203</td>
<td>TOTAL</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-6" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.279893Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.279294Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.283876Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.283293Z&quot;}" data-execution_count="3">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb2-1"><a href=""></a>election_df.columns</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>Index(['year', 'state', 'state_po', 'county_name', 'county_fips', 'office',
       'candidate', 'party', 'candidatevotes', 'totalvotes', 'version',
       'mode'],
      dtype='object')</code></pre>
</div>
</div>
</section>

<section id="profiling" class="title-slide slide level1 center">
<h1>Profiling</h1>
<div id="cell-8" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.285951Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.285624Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.308072Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.307469Z&quot;}" data-execution_count="4">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb4-1"><a href=""></a>election_df.info()</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 72617 entries, 0 to 72616
Data columns (total 12 columns):
 #   Column          Non-Null Count  Dtype  
---  ------          --------------  -----  
 0   year            72617 non-null  int64  
 1   state           72617 non-null  object 
 2   state_po        72553 non-null  object 
 3   county_name     72617 non-null  object 
 4   county_fips     72560 non-null  float64
 5   office          72617 non-null  object 
 6   candidate       72617 non-null  object 
 7   party           72617 non-null  object 
 8   candidatevotes  72212 non-null  float64
 9   totalvotes      72612 non-null  float64
 10  version         72617 non-null  int64  
 11  mode            72617 non-null  object 
dtypes: float64(3), int64(2), object(7)
memory usage: 6.6+ MB</code></pre>
</div>
</div>
</section>

<section id="modes-of-voting" class="title-slide slide level1 center">
<h1><code>mode</code>s of voting</h1>
<ul>
<li><code>mode</code> refers to the different ways that individuals had been able to participate in the election.</li>
</ul>
<div id="cell-10" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.310236Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.309845Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.501488Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.500948Z&quot;}" data-execution_count="5">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb6-1"><a href=""></a>plt.xticks(rotation<span class="op">=</span><span class="st">'vertical'</span>)</span>
<span id="cb6-2"><a href=""></a>election_df[<span class="st">"mode"</span>].hist()</span></code></pre></div>
</details>

</div>
<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-6-output-1.png" class="r-stretch"></section>

<section id="section" class="title-slide slide level1 center">
<h1></h1>
<p>The <code>mode</code> <code>'TOTAL'</code> is the sum of all the other modes</p>
<ol type="1">
<li>Data selection: we can drop all the other rows that have modes other than <code>'TOTAL'</code></li>
<li>Feature selection: since <code>mode</code> now has a single value, we can drop the column</li>
<li>Data cleaning: lowering the <code>county_name</code></li>
</ol>
<div id="cell-12" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.503997Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.503513Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.537922Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.537329Z&quot;}" data-execution_count="6">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb7-1"><a href=""></a>election_df <span class="op">=</span> election_df[election_df[<span class="st">'mode'</span>] <span class="op">==</span> <span class="st">'TOTAL'</span>]</span>
<span id="cb7-2"><a href=""></a>election_df <span class="op">=</span> election_df.drop(columns<span class="op">=</span>[<span class="st">'mode'</span>])</span>
<span id="cb7-3"><a href=""></a>election_df[<span class="st">"county_name"</span>] <span class="op">=</span> election_df[<span class="st">"county_name"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.lower())</span>
<span id="cb7-4"><a href=""></a>election_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">state_po</th>
<th data-quarto-table-cell-role="th">county_name</th>
<th data-quarto-table-cell-role="th">county_fips</th>
<th data-quarto-table-cell-role="th">office</th>
<th data-quarto-table-cell-role="th">candidate</th>
<th data-quarto-table-cell-role="th">party</th>
<th data-quarto-table-cell-role="th">candidatevotes</th>
<th data-quarto-table-cell-role="th">totalvotes</th>
<th data-quarto-table-cell-role="th">version</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>autauga</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>AL GORE</td>
<td>DEMOCRAT</td>
<td>4942.0</td>
<td>17208.0</td>
<td>20191203</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>autauga</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>GEORGE W. BUSH</td>
<td>REPUBLICAN</td>
<td>11993.0</td>
<td>17208.0</td>
<td>20191203</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>autauga</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>RALPH NADER</td>
<td>GREEN</td>
<td>160.0</td>
<td>17208.0</td>
<td>20191203</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2000</td>
<td>ALABAMA</td>
<td>AL</td>
<td>autauga</td>
<td>1001.0</td>
<td>PRESIDENT</td>
<td>OTHER</td>
<td>OTHER</td>
<td>113.0</td>
<td>17208.0</td>
<td>20191203</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="county_fips" class="title-slide slide level1 center">
<h1><code>county_fips</code></h1>
<ul>
<li>County FIPS Codes are unique 5-digit codes that represent specific US counties</li>
<li>We can drop them and keep only the county names</li>
</ul>
<div id="cell-14" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.539928Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.539708Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.641697Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.641119Z&quot;}" data-execution_count="7">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb8-1"><a href=""></a>election_df[<span class="st">"county_fips"</span>].hist()</span>
<span id="cb8-2"><a href=""></a>election_df <span class="op">=</span> election_df.drop(columns<span class="op">=</span>[<span class="st">'county_fips'</span>])</span></code></pre></div>
</details>

</div>
<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-8-output-1.png" class="r-stretch"></section>

<section id="checking-the-granularity-of-the-analysis" class="title-slide slide level1 center">
<h1>Checking the granularity of the analysis</h1>
<p>How can we find the subject (primary key) of each row?</p>
<div id="cell-17" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.643833Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.643423Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.668852Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.668051Z&quot;}" data-execution_count="8">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb9-1"><a href=""></a>election_df.groupby([<span class="st">'state'</span>, <span class="st">'state_po'</span>]).count()[:<span class="dv">8</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">county_name</th>
<th data-quarto-table-cell-role="th">office</th>
<th data-quarto-table-cell-role="th">candidate</th>
<th data-quarto-table-cell-role="th">party</th>
<th data-quarto-table-cell-role="th">candidatevotes</th>
<th data-quarto-table-cell-role="th">totalvotes</th>
<th data-quarto-table-cell-role="th">version</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">state_po</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">ALABAMA</td>
<td data-quarto-table-cell-role="th">AL</td>
<td>1273</td>
<td>1273</td>
<td>1273</td>
<td>1273</td>
<td>1273</td>
<td>1273</td>
<td>1273</td>
<td>1273</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ALASKA</td>
<td data-quarto-table-cell-role="th">AK</td>
<td>845</td>
<td>845</td>
<td>845</td>
<td>845</td>
<td>845</td>
<td>845</td>
<td>845</td>
<td>845</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ARIZONA</td>
<td data-quarto-table-cell-role="th">AZ</td>
<td>240</td>
<td>240</td>
<td>240</td>
<td>240</td>
<td>240</td>
<td>240</td>
<td>240</td>
<td>240</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ARKANSAS</td>
<td data-quarto-table-cell-role="th">AR</td>
<td>1200</td>
<td>1200</td>
<td>1200</td>
<td>1200</td>
<td>1200</td>
<td>1200</td>
<td>1200</td>
<td>1200</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CALIFORNIA</td>
<td data-quarto-table-cell-role="th">CA</td>
<td>1218</td>
<td>1218</td>
<td>1218</td>
<td>1218</td>
<td>1218</td>
<td>1217</td>
<td>1213</td>
<td>1218</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">COLORADO</td>
<td data-quarto-table-cell-role="th">CO</td>
<td>1340</td>
<td>1340</td>
<td>1340</td>
<td>1340</td>
<td>1340</td>
<td>1340</td>
<td>1340</td>
<td>1340</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">CONNECTICUT</td>
<td data-quarto-table-cell-role="th">CT</td>
<td>168</td>
<td>168</td>
<td>168</td>
<td>168</td>
<td>168</td>
<td>168</td>
<td>168</td>
<td>168</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">DELAWARE</td>
<td data-quarto-table-cell-role="th">DE</td>
<td>60</td>
<td>60</td>
<td>60</td>
<td>60</td>
<td>60</td>
<td>60</td>
<td>60</td>
<td>60</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="granularity-state-county" class="title-slide slide level1 center">
<h1>Granularity: <code>State</code> + <code>County</code></h1>
<div id="cell-19" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.671109Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.670698Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.697357Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.696793Z&quot;}" data-execution_count="9">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb10-1"><a href=""></a>election_df.groupby([<span class="st">'state'</span>, <span class="st">'state_po'</span>, <span class="st">'county_name'</span>]).count()[:<span class="dv">8</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">office</th>
<th data-quarto-table-cell-role="th">candidate</th>
<th data-quarto-table-cell-role="th">party</th>
<th data-quarto-table-cell-role="th">candidatevotes</th>
<th data-quarto-table-cell-role="th">totalvotes</th>
<th data-quarto-table-cell-role="th">version</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">state_po</th>
<th data-quarto-table-cell-role="th">county_name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">ALABAMA</td>
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">barbour</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bibb</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">blount</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bullock</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">butler</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">calhoun</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
<td>19</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="granularity-state-county-year" class="title-slide slide level1 center">
<h1>Granularity: <code>State</code> + <code>County</code> + <code>Year</code></h1>
<div id="cell-21" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.699587Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.699176Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.726985Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.726449Z&quot;}" data-execution_count="10">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb11-1"><a href=""></a>election_df.groupby([<span class="st">'state'</span>, <span class="st">'state_po'</span>, <span class="st">'county_name'</span>, <span class="st">'year'</span>]).count()[:<span class="dv">8</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">office</th>
<th data-quarto-table-cell-role="th">candidate</th>
<th data-quarto-table-cell-role="th">party</th>
<th data-quarto-table-cell-role="th">candidatevotes</th>
<th data-quarto-table-cell-role="th">totalvotes</th>
<th data-quarto-table-cell-role="th">version</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">state_po</th>
<th data-quarto-table-cell-role="th">county_name</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">ALABAMA</td>
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td rowspan="6" data-quarto-table-cell-role="th" data-valign="top">autauga</td>
<td data-quarto-table-cell-role="th">2000</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2004</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2008</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2012</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2016</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2020</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">baldwin</td>
<td data-quarto-table-cell-role="th">2000</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2004</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="granularity-state-county-year-party" class="title-slide slide level1 center">
<h1>Granularity: <code>State</code> + <code>County</code> + <code>Year</code> + <code>Party</code></h1>
<div id="cell-23" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.729101Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.728737Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:05.761466Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:05.760853Z&quot;}" data-execution_count="11">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb12-1"><a href=""></a>election_df.groupby([<span class="st">'state'</span>, <span class="st">'state_po'</span>, <span class="st">'county_name'</span>, <span class="st">'year'</span>, <span class="st">'party'</span>]).count()[:<span class="dv">8</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">office</th>
<th data-quarto-table-cell-role="th">candidate</th>
<th data-quarto-table-cell-role="th">candidatevotes</th>
<th data-quarto-table-cell-role="th">totalvotes</th>
<th data-quarto-table-cell-role="th">version</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">state_po</th>
<th data-quarto-table-cell-role="th">county_name</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">party</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">ALABAMA</td>
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">autauga</td>
<td rowspan="4" data-quarto-table-cell-role="th" data-valign="top">2000</td>
<td data-quarto-table-cell-role="th">DEMOCRAT</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">GREEN</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">OTHER</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">REPUBLICAN</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">2004</td>
<td data-quarto-table-cell-role="th">DEMOCRAT</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">OTHER</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">REPUBLICAN</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2008</td>
<td data-quarto-table-cell-role="th">DEMOCRAT</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="feature-engineering-and-aggregation-the-partisanism-attribute" class="title-slide slide level1 center">
<h1>Feature engineering and aggregation: the <code>partisanism</code> attribute</h1>
<ul>
<li>This is too detailed for our analysis</li>
<li>We can aggregate <code>party</code> in the same year by constructing the new attribute <code>partisanism</code> = <span class="math inline">\(\frac{republicans - democrats}{all~votes}\)</span>
<ul>
<li>partisan (adj): feeling or showing adherence to a particular party, faction, cause, or person</li>
</ul></li>
<li>We coarsen the granularity from (<code>State</code> + <code>County</code> + <code>Year</code> + <code>Party</code>) to (<code>State</code> + <code>County</code> + <code>Year</code>)</li>
</ul>
<div id="cell-25" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:05.763871Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:05.763376Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:16.832909Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:16.832300Z&quot;}" data-execution_count="12">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb13-1"><a href=""></a><span class="co"># Group the election_df by state, county, and year</span></span>
<span id="cb13-2"><a href=""></a>grouped_df <span class="op">=</span> election_df.groupby([<span class="st">'state_po'</span>, <span class="st">'county_name'</span>, <span class="st">'year'</span>])</span>
<span id="cb13-3"><a href=""></a><span class="co"># Function to calculate partisanism within each group</span></span>
<span id="cb13-4"><a href=""></a><span class="kw">def</span> calculate_partisanism(group):</span>
<span id="cb13-5"><a href=""></a>    <span class="co"># Calculate votes for each party</span></span>
<span id="cb13-6"><a href=""></a>    democrat_votes <span class="op">=</span> group[group[<span class="st">'party'</span>] <span class="op">==</span> <span class="st">'DEMOCRAT'</span>][<span class="st">'candidatevotes'</span>].<span class="bu">sum</span>()</span>
<span id="cb13-7"><a href=""></a>    republican_votes <span class="op">=</span> group[group[<span class="st">'party'</span>] <span class="op">==</span> <span class="st">'REPUBLICAN'</span>][<span class="st">'candidatevotes'</span>].<span class="bu">sum</span>()</span>
<span id="cb13-8"><a href=""></a>    <span class="co"># Calculate partisanism: Republicans as positive, Democrats as negative</span></span>
<span id="cb13-9"><a href=""></a>    <span class="cf">return</span> (republican_votes <span class="op">-</span> democrat_votes) <span class="op">/</span> group[<span class="st">"candidatevotes"</span>].<span class="bu">sum</span>()</span>
<span id="cb13-10"><a href=""></a><span class="co"># Apply the function to each group</span></span>
<span id="cb13-11"><a href=""></a>partisanism_df <span class="op">=</span> grouped_df.<span class="bu">apply</span>(calculate_partisanism).reset_index(name<span class="op">=</span><span class="st">'partisanism'</span>)</span>
<span id="cb13-12"><a href=""></a>partisanism_df[partisanism_df[<span class="st">"state_po"</span>] <span class="op">==</span> <span class="st">"NY"</span>][:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state_po</th>
<th data-quarto-table-cell-role="th">county_name</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">partisanism</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">11360</td>
<td>NY</td>
<td>albany</td>
<td>2000</td>
<td>-0.267615</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11361</td>
<td>NY</td>
<td>albany</td>
<td>2004</td>
<td>-0.229920</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11362</td>
<td>NY</td>
<td>albany</td>
<td>2008</td>
<td>-0.294632</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11363</td>
<td>NY</td>
<td>albany</td>
<td>2012</td>
<td>-0.322378</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="the-partisanism-time-series" class="title-slide slide level1 center">
<h1>The <code>partisanism</code> time series</h1>
<div id="cell-27" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:16.835020Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:16.834727Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:17.036059Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:17.035453Z&quot;}" data-execution_count="13">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb14-1"><a href=""></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">3</span>))  <span class="co"># Adjust figure size as needed</span></span>
<span id="cb14-2"><a href=""></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb14-3"><a href=""></a>partisanism_df <span class="op">=</span> partisanism_df.sort_values(by<span class="op">=</span>[<span class="st">"year"</span>, <span class="st">"county_name"</span>])  <span class="co"># sort data by year</span></span>
<span id="cb14-4"><a href=""></a>filtered_df <span class="op">=</span> partisanism_df[partisanism_df[<span class="st">"state_po"</span>] <span class="op">==</span> <span class="st">"NY"</span>]  <span class="co"># consider only counties in NY</span></span>
<span id="cb14-5"><a href=""></a><span class="cf">for</span> county <span class="kw">in</span> filtered_df[<span class="st">'county_name'</span>].unique():  <span class="co"># Plot partisanism over time for each county</span></span>
<span id="cb14-6"><a href=""></a>    county_data <span class="op">=</span> filtered_df[filtered_df[<span class="st">'county_name'</span>] <span class="op">==</span> county]</span>
<span id="cb14-7"><a href=""></a>    plt.plot(county_data[<span class="st">'year'</span>], county_data[<span class="st">'partisanism'</span>], label<span class="op">=</span>county, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb14-8"><a href=""></a>    <span class="cf">if</span> i <span class="op">==</span> <span class="dv">9</span>: <span class="cf">break</span>  <span class="co"># only plot the first 10 counties in NY</span></span>
<span id="cb14-9"><a href=""></a>    i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb14-10"><a href=""></a><span class="co"># Add labels and title</span></span>
<span id="cb14-11"><a href=""></a>ax.set_xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb14-12"><a href=""></a>ax.set_ylabel(<span class="st">'Partisanism'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb14-13"><a href=""></a>plt.xticks(ticks<span class="op">=</span>filtered_df[<span class="st">"year"</span>].unique(), rotation<span class="op">=</span><span class="dv">45</span>)  <span class="co"># Rotate x-axis labels for better readability</span></span>
<span id="cb14-14"><a href=""></a>ax.legend(title<span class="op">=</span><span class="st">'County'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)  <span class="co"># Move legend outside the plot</span></span>
<span id="cb14-15"><a href=""></a>fig.tight_layout()</span></code></pre></div>
</details>

</div>
<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-14-output-1.png" class="r-stretch"></section>

<section id="aggregating-partisanism" class="title-slide slide level1 center">
<h1>Aggregating <code>partisanism</code></h1>
<ul>
<li>We have the partisanism value of presidential elections 2000, 2004, 2008, 2012, 2016, and 2020 for every county</li>
<li>We can interpolate the data and obtain the mean and slope of partisanism across elections over 20 years</li>
<li>We coarsen the granularity from (<code>State</code> + <code>County</code> + <code>Year</code>) to (<code>State</code> + <code>County</code>)</li>
</ul>
<div id="cell-29" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:17.038427Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:17.038029Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:18.434812Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:18.434152Z&quot;}" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="14">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mean_Partisanism</th>
<th data-quarto-table-cell-role="th">Slope_Partisanism</th>
<th data-quarto-table-cell-role="th">Intercept_Partisanism</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">AK</td>
<td data-quarto-table-cell-role="th">district 1</td>
<td>0.274999</td>
<td>-0.076291</td>
<td>0.465726</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">district 10</td>
<td>0.404606</td>
<td>0.038843</td>
<td>0.307498</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">district 11</td>
<td>0.429907</td>
<td>0.009065</td>
<td>0.407245</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">district 12</td>
<td>0.417909</td>
<td>0.019609</td>
<td>0.368885</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">district 13</td>
<td>0.289470</td>
<td>0.003915</td>
<td>0.279682</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">WY</td>
<td data-quarto-table-cell-role="th">sweetwater</td>
<td>0.379123</td>
<td>0.055787</td>
<td>0.239655</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">teton</td>
<td>-0.155271</td>
<td>-0.086146</td>
<td>0.060094</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">uinta</td>
<td>0.540841</td>
<td>0.025489</td>
<td>0.477118</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">washakie</td>
<td>0.573747</td>
<td>0.017022</td>
<td>0.531192</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">weston</td>
<td>0.691490</td>
<td>0.029408</td>
<td>0.617971</td>
</tr>
</tbody>
</table>

<p>3151 rows × 3 columns</p>
</div>
</div>
</div>
</section>

<section id="visualizing-the-intercept" class="title-slide slide level1 center">
<h1>Visualizing the intercept</h1>

<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-16-output-1.png" class="r-stretch"></section>

<section id="education-data" class="title-slide slide level1 center">
<h1>Education data</h1>
<div id="cell-33" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:18.552799Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:18.552362Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:18.820400Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:18.819739Z&quot;}" data-execution_count="16">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb15-1"><a href=""></a>edu_df <span class="op">=</span> pd.read_excel(<span class="st">'./datasets/census/Education.xls'</span>)</span>
<span id="cb15-2"><a href=""></a>edu_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Educational attainment for adults age 25 and older for the U.S., States, and counties, 1970-2019</th>
<th data-quarto-table-cell-role="th">Unnamed: 1</th>
<th data-quarto-table-cell-role="th">Unnamed: 2</th>
<th data-quarto-table-cell-role="th">Unnamed: 3</th>
<th data-quarto-table-cell-role="th">Unnamed: 4</th>
<th data-quarto-table-cell-role="th">Unnamed: 5</th>
<th data-quarto-table-cell-role="th">Unnamed: 6</th>
<th data-quarto-table-cell-role="th">Unnamed: 7</th>
<th data-quarto-table-cell-role="th">Unnamed: 8</th>
<th data-quarto-table-cell-role="th">Unnamed: 9</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Unnamed: 37</th>
<th data-quarto-table-cell-role="th">Unnamed: 38</th>
<th data-quarto-table-cell-role="th">Unnamed: 39</th>
<th data-quarto-table-cell-role="th">Unnamed: 40</th>
<th data-quarto-table-cell-role="th">Unnamed: 41</th>
<th data-quarto-table-cell-role="th">Unnamed: 42</th>
<th data-quarto-table-cell-role="th">Unnamed: 43</th>
<th data-quarto-table-cell-role="th">Unnamed: 44</th>
<th data-quarto-table-cell-role="th">Unnamed: 45</th>
<th data-quarto-table-cell-role="th">Unnamed: 46</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Sources: U.S. Census Bureau, 1970, 1980, 1990,...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>For definitions of rural classifications, see ...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>This table was prepared by USDA, Economic Rese...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>FIPS Code</td>
<td>State</td>
<td>Area name</td>
<td>2003 Rural-urban Continuum Code</td>
<td>2003 Urban Influence Code</td>
<td>2013 Rural-urban Continuum Code</td>
<td>2013 Urban Influence Code</td>
<td>Less than a high school diploma, 1970</td>
<td>High school diploma only, 1970</td>
<td>Some college (1-3 years), 1970</td>
<td>...</td>
<td>Percent of adults completing some college or a...</td>
<td>Percent of adults with a bachelor's degree or ...</td>
<td>Less than a high school diploma, 2015-19</td>
<td>High school diploma only, 2015-19</td>
<td>Some college or associate's degree, 2015-19</td>
<td>Bachelor's degree or higher, 2015-19</td>
<td>Percent of adults with less than a high school...</td>
<td>Percent of adults with a high school diploma o...</td>
<td>Percent of adults completing some college or a...</td>
<td>Percent of adults with a bachelor's degree or ...</td>
</tr>
</tbody>
</table>

<p>4 rows × 47 columns</p>
</div>
</div>
</div>
</section>

<section id="do-not-consider-the-first-3-rows" class="title-slide slide level1 center">
<h1>Do not consider the first 3 rows</h1>
<div id="cell-35" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:18.822730Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:18.822291Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:19.111873Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:19.111214Z&quot;}" data-execution_count="17">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb16-1"><a href=""></a>edu_df <span class="op">=</span> pd.read_excel(<span class="st">'./datasets/census/Education.xls'</span>, skiprows<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb16-2"><a href=""></a>edu_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">FIPS Code</th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Area name</th>
<th data-quarto-table-cell-role="th">2003 Rural-urban Continuum Code</th>
<th data-quarto-table-cell-role="th">2003 Urban Influence Code</th>
<th data-quarto-table-cell-role="th">2013 Rural-urban Continuum Code</th>
<th data-quarto-table-cell-role="th">2013 Urban Influence Code</th>
<th data-quarto-table-cell-role="th">Less than a high school diploma, 1970</th>
<th data-quarto-table-cell-role="th">High school diploma only, 1970</th>
<th data-quarto-table-cell-role="th">Some college (1-3 years), 1970</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Percent of adults completing some college or associate's degree, 2000</th>
<th data-quarto-table-cell-role="th">Percent of adults with a bachelor's degree or higher, 2000</th>
<th data-quarto-table-cell-role="th">Less than a high school diploma, 2015-19</th>
<th data-quarto-table-cell-role="th">High school diploma only, 2015-19</th>
<th data-quarto-table-cell-role="th">Some college or associate's degree, 2015-19</th>
<th data-quarto-table-cell-role="th">Bachelor's degree or higher, 2015-19</th>
<th data-quarto-table-cell-role="th">Percent of adults with less than a high school diploma, 2015-19</th>
<th data-quarto-table-cell-role="th">Percent of adults with a high school diploma only, 2015-19</th>
<th data-quarto-table-cell-role="th">Percent of adults completing some college or associate's degree, 2015-19</th>
<th data-quarto-table-cell-role="th">Percent of adults with a bachelor's degree or higher, 2015-19</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>US</td>
<td>United States</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>52373312.0</td>
<td>34158051.0</td>
<td>11650730.0</td>
<td>...</td>
<td>27.4</td>
<td>24.4</td>
<td>26472261.0</td>
<td>59472748.0</td>
<td>63756905.0</td>
<td>70920162.0</td>
<td>11.998918</td>
<td>26.956844</td>
<td>28.898697</td>
<td>32.145542</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1000</td>
<td>AL</td>
<td>Alabama</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1062306.0</td>
<td>468269.0</td>
<td>136287.0</td>
<td>...</td>
<td>25.9</td>
<td>19.0</td>
<td>458922.0</td>
<td>1022839.0</td>
<td>993344.0</td>
<td>845772.0</td>
<td>13.819302</td>
<td>30.800268</td>
<td>29.912098</td>
<td>25.468332</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1001</td>
<td>AL</td>
<td>Autauga County</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>6611.0</td>
<td>3757.0</td>
<td>933.0</td>
<td>...</td>
<td>26.9</td>
<td>18.0</td>
<td>4291.0</td>
<td>12551.0</td>
<td>10596.0</td>
<td>9929.0</td>
<td>11.483395</td>
<td>33.588459</td>
<td>28.356571</td>
<td>26.571573</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1003</td>
<td>AL</td>
<td>Baldwin County</td>
<td>4.0</td>
<td>5.0</td>
<td>3.0</td>
<td>2.0</td>
<td>18726.0</td>
<td>8426.0</td>
<td>2334.0</td>
<td>...</td>
<td>29.3</td>
<td>23.1</td>
<td>13893.0</td>
<td>41797.0</td>
<td>47274.0</td>
<td>48148.0</td>
<td>9.193843</td>
<td>27.659616</td>
<td>31.284081</td>
<td>31.862459</td>
</tr>
</tbody>
</table>

<p>4 rows × 47 columns</p>
</div>
</div>
</div>
</section>

<section id="section-1" class="title-slide slide level1 center">
<h1></h1>
<div id="cell-37" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:19.114099Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:19.113710Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:19.122092Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:19.121580Z&quot;}" data-execution_count="18">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb17-1"><a href=""></a>edu_df.info()</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 3283 entries, 0 to 3282
Data columns (total 47 columns):
 #   Column                                                                    Non-Null Count  Dtype  
---  ------                                                                    --------------  -----  
 0   FIPS Code                                                                 3283 non-null   int64  
 1   State                                                                     3283 non-null   object 
 2   Area name                                                                 3283 non-null   object 
 3   2003 Rural-urban Continuum Code                                           3221 non-null   float64
 4   2003 Urban Influence Code                                                 3221 non-null   float64
 5   2013 Rural-urban Continuum Code                                           3221 non-null   float64
 6   2013 Urban Influence Code                                                 3221 non-null   float64
 7   Less than a high school diploma, 1970                                     3186 non-null   float64
 8   High school diploma only, 1970                                            3186 non-null   float64
 9   Some college (1-3 years), 1970                                            3186 non-null   float64
 10  Four years of college or higher, 1970                                     3186 non-null   float64
 11  Percent of adults with less than a high school diploma, 1970              3186 non-null   float64
 12  Percent of adults with a high school diploma only, 1970                   3186 non-null   float64
 13  Percent of adults completing some college (1-3 years), 1970               3186 non-null   float64
 14  Percent of adults completing four years of college or higher, 1970        3186 non-null   float64
 15  Less than a high school diploma, 1980                                     3267 non-null   float64
 16  High school diploma only, 1980                                            3267 non-null   float64
 17  Some college (1-3 years), 1980                                            3267 non-null   float64
 18  Four years of college or higher, 1980                                     3267 non-null   float64
 19  Percent of adults with less than a high school diploma, 1980              3267 non-null   float64
 20  Percent of adults with a high school diploma only, 1980                   3267 non-null   float64
 21  Percent of adults completing some college (1-3 years), 1980               3267 non-null   float64
 22  Percent of adults completing four years of college or higher, 1980        3267 non-null   float64
 23  Less than a high school diploma, 1990                                     3271 non-null   float64
 24  High school diploma only, 1990                                            3271 non-null   float64
 25  Some college or associate's degree, 1990                                  3271 non-null   float64
 26  Bachelor's degree or higher, 1990                                         3271 non-null   float64
 27  Percent of adults with less than a high school diploma, 1990              3271 non-null   float64
 28  Percent of adults with a high school diploma only, 1990                   3271 non-null   float64
 29  Percent of adults completing some college or associate's degree, 1990     3270 non-null   float64
 30  Percent of adults with a bachelor's degree or higher, 1990                3271 non-null   float64
 31  Less than a high school diploma, 2000                                     3272 non-null   float64
 32  High school diploma only, 2000                                            3272 non-null   float64
 33  Some college or associate's degree, 2000                                  3272 non-null   float64
 34  Bachelor's degree or higher, 2000                                         3272 non-null   float64
 35  Percent of adults with less than a high school diploma, 2000              3272 non-null   float64
 36  Percent of adults with a high school diploma only, 2000                   3272 non-null   float64
 37  Percent of adults completing some college or associate's degree, 2000     3272 non-null   float64
 38  Percent of adults with a bachelor's degree or higher, 2000                3272 non-null   float64
 39  Less than a high school diploma, 2015-19                                  3273 non-null   float64
 40  High school diploma only, 2015-19                                         3273 non-null   float64
 41  Some college or associate's degree, 2015-19                               3273 non-null   float64
 42  Bachelor's degree or higher, 2015-19                                      3273 non-null   float64
 43  Percent of adults with less than a high school diploma, 2015-19           3273 non-null   float64
 44  Percent of adults with a high school diploma only, 2015-19                3273 non-null   float64
 45  Percent of adults completing some college or associate's degree, 2015-19  3273 non-null   float64
 46  Percent of adults with a bachelor's degree or higher, 2015-19             3273 non-null   float64
dtypes: float64(44), int64(1), object(2)
memory usage: 1.2+ MB</code></pre>
</div>
</div>
</section>

<section id="selecting-some-features" class="title-slide slide level1 center">
<h1>Selecting some features</h1>
<div id="cell-39" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:19.124046Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:19.123678Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:19.130626Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:19.130176Z&quot;}" data-execution_count="19">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb19-1"><a href=""></a>edu_df <span class="op">=</span> edu_df[[<span class="st">'State'</span>, <span class="st">'Area name'</span>, <span class="st">"Percent of adults with a bachelor's degree or higher, 2015-19"</span>]]</span>
<span id="cb19-2"><a href=""></a>edu_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Area name</th>
<th data-quarto-table-cell-role="th">Percent of adults with a bachelor's degree or higher, 2015-19</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>US</td>
<td>United States</td>
<td>32.145542</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>AL</td>
<td>Alabama</td>
<td>25.468332</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>AL</td>
<td>Autauga County</td>
<td>26.571573</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>AL</td>
<td>Baldwin County</td>
<td>31.862459</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-40" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:19.132641Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:19.132206Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:19.140468Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:19.139926Z&quot;}" data-execution_count="20">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb20-1"><a href=""></a>edu_df <span class="op">=</span> edu_df.rename({<span class="st">'Area name'</span>: <span class="st">'Area_Name'</span>, <span class="st">"Percent of adults with a bachelor's degree or higher, 2015-19"</span>: <span class="st">"HigherEdPercent"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb20-2"><a href=""></a>edu_df <span class="op">=</span> edu_df[edu_df[<span class="st">"Area_Name"</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.endswith(<span class="st">"County"</span>))]</span>
<span id="cb20-3"><a href=""></a>edu_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Area_Name</th>
<th data-quarto-table-cell-role="th">HigherEdPercent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>AL</td>
<td>Autauga County</td>
<td>26.571573</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>AL</td>
<td>Baldwin County</td>
<td>31.862459</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>AL</td>
<td>Barbour County</td>
<td>11.578713</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>AL</td>
<td>Bibb County</td>
<td>10.378526</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="poverty-data" class="title-slide slide level1 center">
<h1>Poverty data</h1>
<div id="cell-42" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:19.142423Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:19.142066Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:19.323509Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:19.322898Z&quot;}" data-execution_count="21">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb21-1"><a href=""></a>pov_df <span class="op">=</span> pd.read_excel(<span class="st">'./datasets/census/PovertyEstimates.xls'</span>, skiprows<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb21-2"><a href=""></a><span class="bu">print</span>(pov_df.columns)</span>
<span id="cb21-3"><a href=""></a><span class="co"># 'POV04_2019' = Estimated percent of people of all ages in poverty 2019</span></span>
<span id="cb21-4"><a href=""></a><span class="co"># 'MEDHHINC_2019' = Estimate of median household income 2019</span></span>
<span id="cb21-5"><a href=""></a>pov_df <span class="op">=</span> pov_df[[<span class="st">'Stabr'</span>, <span class="st">'Area_name'</span>, <span class="st">'PCTPOVALL_2019'</span>, <span class="st">'MEDHHINC_2019'</span>]]</span>
<span id="cb21-6"><a href=""></a>pov_df <span class="op">=</span> pov_df.rename({<span class="st">'Area_name'</span>: <span class="st">'Area_Name'</span>, <span class="st">'Stabr'</span>: <span class="st">'State'</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-7"><a href=""></a>pov_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Index(['FIPStxt', 'Stabr', 'Area_name', 'Rural-urban_Continuum_Code_2003',
       'Urban_Influence_Code_2003', 'Rural-urban_Continuum_Code_2013',
       'Urban_Influence_Code_2013', 'POVALL_2019', 'CI90LBALL_2019',
       'CI90UBALL_2019', 'PCTPOVALL_2019', 'CI90LBALLP_2019',
       'CI90UBALLP_2019', 'POV017_2019', 'CI90LB017_2019', 'CI90UB017_2019',
       'PCTPOV017_2019', 'CI90LB017P_2019', 'CI90UB017P_2019', 'POV517_2019',
       'CI90LB517_2019', 'CI90UB517_2019', 'PCTPOV517_2019', 'CI90LB517P_2019',
       'CI90UB517P_2019', 'MEDHHINC_2019', 'CI90LBINC_2019', 'CI90UBINC_2019',
       'POV04_2019', 'CI90LB04_2019', 'CI90UB04_2019', 'PCTPOV04_2019',
       'CI90LB04P_2019', 'CI90UB04P_2019'],
      dtype='object')</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Area_Name</th>
<th data-quarto-table-cell-role="th">PCTPOVALL_2019</th>
<th data-quarto-table-cell-role="th">MEDHHINC_2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>US</td>
<td>United States</td>
<td>12.3</td>
<td>65712</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>AL</td>
<td>Alabama</td>
<td>15.6</td>
<td>51771</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>AL</td>
<td>Autauga County</td>
<td>12.1</td>
<td>58233</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>AL</td>
<td>Baldwin County</td>
<td>10.1</td>
<td>59871</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="unemployment-data" class="title-slide slide level1 center">
<h1>Unemployment data</h1>
<div id="cell-44" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:19.325955Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:19.325456Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:21.544599Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:21.544023Z&quot;}" data-execution_count="22">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb23-1"><a href=""></a>employment_df <span class="op">=</span> pd.read_excel(<span class="st">'./datasets/census/Unemployment.xlsx'</span>, skiprows<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb23-2"><a href=""></a>employment_df <span class="op">=</span> employment_df[[<span class="st">'State'</span>, <span class="st">'Area_name'</span>, <span class="st">'Unemployment_rate_2019'</span>]]</span>
<span id="cb23-3"><a href=""></a>employment_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Area_name</th>
<th data-quarto-table-cell-role="th">Unemployment_rate_2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>US</td>
<td>United States</td>
<td>3.669308</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>AL</td>
<td>Alabama</td>
<td>3.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>AL</td>
<td>Autauga County, AL</td>
<td>2.700000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>AL</td>
<td>Baldwin County, AL</td>
<td>2.800000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-45" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:21.546801Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:21.546388Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:21.555323Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:21.554784Z&quot;}" data-execution_count="23">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb24-1"><a href=""></a>employment_df[<span class="st">'Area_Name'</span>] <span class="op">=</span> employment_df.Area_name.<span class="bu">apply</span>(<span class="kw">lambda</span> v: v[:v.find(<span class="st">','</span>)] <span class="cf">if</span> <span class="st">','</span> <span class="kw">in</span> v <span class="cf">else</span> v)</span>
<span id="cb24-2"><a href=""></a>employment_df <span class="op">=</span> employment_df.drop(columns <span class="op">=</span> [<span class="st">"Area_name"</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb24-3"><a href=""></a>employment_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Unemployment_rate_2019</th>
<th data-quarto-table-cell-role="th">Area_Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>US</td>
<td>3.669308</td>
<td>United States</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>AL</td>
<td>3.000000</td>
<td>Alabama</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>AL</td>
<td>2.700000</td>
<td>Autauga County</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>AL</td>
<td>2.800000</td>
<td>Baldwin County</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="population-data" class="title-slide slide level1 center">
<h1>Population data</h1>
<div id="cell-47" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:21.557322Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:21.557028Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.413791Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.413251Z&quot;}" data-execution_count="24">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb25-1"><a href=""></a>pop_df <span class="op">=</span> pd.read_excel(<span class="st">'./datasets/census/PopulationEstimates.xls'</span>, skiprows<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb25-2"><a href=""></a><span class="bu">print</span>(pop_df.columns)</span>
<span id="cb25-3"><a href=""></a>pop_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Index(['FIPStxt', 'State', 'Area_Name', 'Rural-urban_Continuum Code_2003',
       'Rural-urban_Continuum Code_2013', 'Urban_Influence_Code_2003',
       'Urban_Influence_Code_2013', 'Economic_typology_2015',
       'CENSUS_2010_POP', 'ESTIMATES_BASE_2010',
       ...
       'R_DOMESTIC_MIG_2019', 'R_NET_MIG_2011', 'R_NET_MIG_2012',
       'R_NET_MIG_2013', 'R_NET_MIG_2014', 'R_NET_MIG_2015', 'R_NET_MIG_2016',
       'R_NET_MIG_2017', 'R_NET_MIG_2018', 'R_NET_MIG_2019'],
      dtype='object', length=165)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">FIPStxt</th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Area_Name</th>
<th data-quarto-table-cell-role="th">Rural-urban_Continuum Code_2003</th>
<th data-quarto-table-cell-role="th">Rural-urban_Continuum Code_2013</th>
<th data-quarto-table-cell-role="th">Urban_Influence_Code_2003</th>
<th data-quarto-table-cell-role="th">Urban_Influence_Code_2013</th>
<th data-quarto-table-cell-role="th">Economic_typology_2015</th>
<th data-quarto-table-cell-role="th">CENSUS_2010_POP</th>
<th data-quarto-table-cell-role="th">ESTIMATES_BASE_2010</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">R_DOMESTIC_MIG_2019</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2011</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2012</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2013</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2014</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2015</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2016</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2017</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2018</th>
<th data-quarto-table-cell-role="th">R_NET_MIG_2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>US</td>
<td>United States</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>308745538</td>
<td>308758105</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1000</td>
<td>AL</td>
<td>Alabama</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>4779736</td>
<td>4780125</td>
<td>...</td>
<td>1.917501</td>
<td>0.578434</td>
<td>1.186314</td>
<td>1.522549</td>
<td>0.563489</td>
<td>0.626357</td>
<td>0.745172</td>
<td>1.090366</td>
<td>1.773786</td>
<td>2.483744</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1001</td>
<td>AL</td>
<td>Autauga County</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>0.0</td>
<td>54571</td>
<td>54597</td>
<td>...</td>
<td>4.847310</td>
<td>6.018182</td>
<td>-6.226119</td>
<td>-3.902226</td>
<td>1.970443</td>
<td>-1.712875</td>
<td>4.777171</td>
<td>0.849656</td>
<td>0.540916</td>
<td>4.560062</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1003</td>
<td>AL</td>
<td>Baldwin County</td>
<td>4.0</td>
<td>3.0</td>
<td>5.0</td>
<td>2.0</td>
<td>5.0</td>
<td>182265</td>
<td>182265</td>
<td>...</td>
<td>24.017829</td>
<td>16.641870</td>
<td>17.488579</td>
<td>22.751474</td>
<td>20.184334</td>
<td>17.725964</td>
<td>21.279291</td>
<td>22.398256</td>
<td>24.727215</td>
<td>24.380567</td>
</tr>
</tbody>
</table>

<p>4 rows × 165 columns</p>
</div>
</div>
</div>
</section>

<section id="section-2" class="title-slide slide level1 center">
<h1></h1>
<div id="cell-49" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.415916Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.415519Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.422761Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.422189Z&quot;}" data-execution_count="25">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb27-1"><a href=""></a>pop_df <span class="op">=</span> pop_df[[<span class="st">'State'</span>, <span class="st">'Area_Name'</span>, <span class="st">'CENSUS_2010_POP'</span>]]</span>
<span id="cb27-2"><a href=""></a>pop_df <span class="op">=</span> pop_df.rename({<span class="st">'CENSUS_2010_POP'</span>: <span class="st">"population"</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb27-3"><a href=""></a>pop_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Area_Name</th>
<th data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>US</td>
<td>United States</td>
<td>308745538</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>AL</td>
<td>Alabama</td>
<td>4779736</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>AL</td>
<td>Autauga County</td>
<td>54571</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>AL</td>
<td>Baldwin County</td>
<td>182265</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="integration" class="title-slide slide level1 center">
<h1>Integration</h1>
<p>Now <code>edu_df</code>, <code>pop_df</code>, <code>pov_df</code>, <code>employment_df</code> all have the <code>State</code> and <code>Area_Name</code> columns</p>
<div id="cell-51" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.424955Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.424509Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.428441Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.427892Z&quot;}" data-execution_count="26">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb28-1"><a href=""></a><span class="bu">print</span>(<span class="ss">f"edu_df: </span><span class="sc">{</span>edu_df<span class="sc">.</span>columns<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-2"><a href=""></a><span class="bu">print</span>(<span class="ss">f"pop_df: </span><span class="sc">{</span>pop_df<span class="sc">.</span>columns<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-3"><a href=""></a><span class="bu">print</span>(<span class="ss">f"pov_df: </span><span class="sc">{</span>pov_df<span class="sc">.</span>columns<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb28-4"><a href=""></a><span class="bu">print</span>(<span class="ss">f"employment_df: </span><span class="sc">{</span>employment_df<span class="sc">.</span>columns<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>edu_df: Index(['State', 'Area_Name', 'HigherEdPercent'], dtype='object')
pop_df: Index(['State', 'Area_Name', 'population'], dtype='object')
pov_df: Index(['State', 'Area_Name', 'PCTPOVALL_2019', 'MEDHHINC_2019'], dtype='object')
employment_df: Index(['State', 'Unemployment_rate_2019', 'Area_Name'], dtype='object')</code></pre>
</div>
</div>
<p>Still, they require some manipulation.</p>
<ul>
<li>For instance, they contains data from both the US (aggregated data) and single counties (detailed data)</li>
</ul>
<div id="cell-53" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.430377Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.430027Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.453592Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.453020Z&quot;}" data-execution_count="27">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb30-1"><a href=""></a><span class="cf">for</span> cur_df <span class="kw">in</span> [edu_df, pop_df, pov_df, employment_df]:</span>
<span id="cb30-2"><a href=""></a>    cur_df.drop(cur_df.index[cur_df[<span class="st">'Area_Name'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">"County"</span> <span class="kw">not</span> <span class="kw">in</span> x)], inplace<span class="op">=</span><span class="va">True</span>)  <span class="co"># Only keep the counties</span></span>
<span id="cb30-3"><a href=""></a>    cur_df[<span class="st">'County_Name'</span>] <span class="op">=</span> cur_df[<span class="st">'Area_Name'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.replace(<span class="st">" County"</span>, <span class="st">""</span>).lower())  <span class="co"># Lower the name of all counties</span></span>
<span id="cb30-4"><a href=""></a>    cur_df.drop(columns <span class="op">=</span> [<span class="st">'Area_Name'</span>], inplace<span class="op">=</span><span class="va">True</span>)  <span class="co"># Drop the column `Area_Name`</span></span>
<span id="cb30-5"><a href=""></a>    cur_df.set_index([<span class="st">'State'</span>, <span class="st">'County_Name'</span>], inplace<span class="op">=</span><span class="va">True</span>)  <span class="co"># Set the index of the table</span></span></code></pre></div>
</details>
</div>
</section>

<section id="section-3" class="title-slide slide level1 center">
<h1></h1>
<div id="cell-55" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.455780Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.455445Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.461947Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.461454Z&quot;}" data-execution_count="28">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb31-1"><a href=""></a>edu_df[:<span class="dv">2</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">HigherEdPercent</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>26.571573</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>31.862459</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-56" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.464022Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.463462Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.469100Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.468584Z&quot;}" data-execution_count="29">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb32-1"><a href=""></a>pop_df[:<span class="dv">2</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>54571</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>182265</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-57" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.470707Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.470518Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.476657Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.476121Z&quot;}" data-execution_count="30">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb33-1"><a href=""></a>pov_df[:<span class="dv">2</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PCTPOVALL_2019</th>
<th data-quarto-table-cell-role="th">MEDHHINC_2019</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>12.1</td>
<td>58233</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>10.1</td>
<td>59871</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-58" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.478682Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.478234Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.484119Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.483568Z&quot;}" data-execution_count="31">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb34-1"><a href=""></a>employment_df[:<span class="dv">2</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="31">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unemployment_rate_2019</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>2.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>2.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="also-we-have-partisan_df" class="title-slide slide level1 center">
<h1>Also, we have <code>partisan_df</code></h1>
<div id="cell-60" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.486155Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.485737Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.493792Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.493199Z&quot;}" data-execution_count="32">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb35-1"><a href=""></a>partisan_df</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="32">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mean_Partisanism</th>
<th data-quarto-table-cell-role="th">Slope_Partisanism</th>
<th data-quarto-table-cell-role="th">Intercept_Partisanism</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">AK</td>
<td data-quarto-table-cell-role="th">district 1</td>
<td>0.274999</td>
<td>-0.076291</td>
<td>0.465726</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">district 10</td>
<td>0.404606</td>
<td>0.038843</td>
<td>0.307498</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">district 11</td>
<td>0.429907</td>
<td>0.009065</td>
<td>0.407245</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">district 12</td>
<td>0.417909</td>
<td>0.019609</td>
<td>0.368885</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">district 13</td>
<td>0.289470</td>
<td>0.003915</td>
<td>0.279682</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">WY</td>
<td data-quarto-table-cell-role="th">sweetwater</td>
<td>0.379123</td>
<td>0.055787</td>
<td>0.239655</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">teton</td>
<td>-0.155271</td>
<td>-0.086146</td>
<td>0.060094</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">uinta</td>
<td>0.540841</td>
<td>0.025489</td>
<td>0.477118</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">washakie</td>
<td>0.573747</td>
<td>0.017022</td>
<td>0.531192</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">weston</td>
<td>0.691490</td>
<td>0.029408</td>
<td>0.617971</td>
</tr>
</tbody>
</table>

<p>3151 rows × 3 columns</p>
</div>
</div>
</div>
</section>

<section id="joining-the-sources" class="title-slide slide level1 center">
<h1>Joining the sources</h1>
<div id="cell-62" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.495794Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.495363Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.510950Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.510480Z&quot;}" data-execution_count="33">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb36-1"><a href=""></a>county_df <span class="op">=</span> pop_df.join(edu_df).join(pov_df).join(employment_df).join(partisan_df)</span>
<span id="cb36-2"><a href=""></a>county_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="33">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">population</th>
<th data-quarto-table-cell-role="th">HigherEdPercent</th>
<th data-quarto-table-cell-role="th">PCTPOVALL_2019</th>
<th data-quarto-table-cell-role="th">MEDHHINC_2019</th>
<th data-quarto-table-cell-role="th">Unemployment_rate_2019</th>
<th data-quarto-table-cell-role="th">Mean_Partisanism</th>
<th data-quarto-table-cell-role="th">Slope_Partisanism</th>
<th data-quarto-table-cell-role="th">Intercept_Partisanism</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="4" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>54571</td>
<td>26.571573</td>
<td>12.1</td>
<td>58233.0</td>
<td>2.7</td>
<td>0.467068</td>
<td>0.001845</td>
<td>0.462455</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>182265</td>
<td>31.862459</td>
<td>10.1</td>
<td>59871.0</td>
<td>2.8</td>
<td>0.532724</td>
<td>0.012846</td>
<td>0.500609</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">barbour</td>
<td>27457</td>
<td>11.578713</td>
<td>27.1</td>
<td>35972.0</td>
<td>3.8</td>
<td>0.034259</td>
<td>0.007185</td>
<td>0.016297</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bibb</td>
<td>22915</td>
<td>10.378526</td>
<td>20.3</td>
<td>47918.0</td>
<td>3.1</td>
<td>0.453212</td>
<td>0.060381</td>
<td>0.302259</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="section-4" class="title-slide slide level1 center">
<h1></h1>
<div id="cell-64" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.513010Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.512616Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.519758Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.519232Z&quot;}" data-execution_count="34">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb37-1"><a href=""></a>county_df.info()</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
MultiIndex: 3007 entries, ('AL', 'autauga') to ('WY', 'weston')
Data columns (total 8 columns):
 #   Column                  Non-Null Count  Dtype  
---  ------                  --------------  -----  
 0   population              3007 non-null   int64  
 1   HigherEdPercent         3005 non-null   float64
 2   PCTPOVALL_2019          3000 non-null   float64
 3   MEDHHINC_2019           3000 non-null   float64
 4   Unemployment_rate_2019  2999 non-null   float64
 5   Mean_Partisanism        3003 non-null   float64
 6   Slope_Partisanism       3003 non-null   float64
 7   Intercept_Partisanism   3003 non-null   float64
dtypes: float64(7), int64(1)
memory usage: 341.0+ KB</code></pre>
</div>
</div>
</section>

<section id="handling-the-missing-values" class="title-slide slide level1 center">
<h1>Handling the missing values</h1>
<div id="cell-66" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.521821Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.521402Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.529075Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.528553Z&quot;}" data-execution_count="35">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb39-1"><a href=""></a>county_df.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb39-2"><a href=""></a>county_df.info()</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
MultiIndex: 2992 entries, ('AL', 'autauga') to ('WY', 'weston')
Data columns (total 8 columns):
 #   Column                  Non-Null Count  Dtype  
---  ------                  --------------  -----  
 0   population              2992 non-null   int64  
 1   HigherEdPercent         2992 non-null   float64
 2   PCTPOVALL_2019          2992 non-null   float64
 3   MEDHHINC_2019           2992 non-null   float64
 4   Unemployment_rate_2019  2992 non-null   float64
 5   Mean_Partisanism        2992 non-null   float64
 6   Slope_Partisanism       2992 non-null   float64
 7   Intercept_Partisanism   2992 non-null   float64
dtypes: float64(7), int64(1)
memory usage: 275.4+ KB</code></pre>
</div>
</div>
</section>

<section id="outliers" class="title-slide slide level1 center">
<h1>Outliers</h1>
<div id="cell-68" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.531141Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.530769Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.833987Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.833337Z&quot;}" data-execution_count="36">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb41-1"><a href=""></a><span class="cf">for</span> att <span class="kw">in</span> county_df.columns[:<span class="dv">2</span>]:</span>
<span id="cb41-2"><a href=""></a>    fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, sharey<span class="op">=</span><span class="va">False</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">2</span>))</span>
<span id="cb41-3"><a href=""></a>    county_df[att].plot.hist(ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb41-4"><a href=""></a>    county_df[att].plot.box(vert<span class="op">=</span><span class="va">True</span>, ax<span class="op">=</span>axs[<span class="dv">1</span>])</span>
<span id="cb41-5"><a href=""></a>    axs[<span class="dv">1</span>].set_ylabel(<span class="st">'Value'</span>)</span>
<span id="cb41-6"><a href=""></a>    fig.tight_layout()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="04-datapreparation-lab_files/figure-revealjs/cell-37-output-1.png"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="04-datapreparation-lab_files/figure-revealjs/cell-37-output-2.png"></p>
</figure>
</div>
</div>
</div>
</section>

<section id="setting-the-class-attribute" class="title-slide slide level1 center">
<h1>Setting the <code>class</code> attribute</h1>
<div id="cell-70" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.836132Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.835758Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.847968Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.847469Z&quot;}" data-execution_count="37">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb42-1"><a href=""></a><span class="kw">def</span> set_class(x):</span>
<span id="cb42-2"><a href=""></a>    <span class="cf">if</span> x <span class="op">&gt;</span> <span class="fl">0.1</span>: <span class="cf">return</span> <span class="st">"republican"</span></span>
<span id="cb42-3"><a href=""></a>    <span class="cf">elif</span> x <span class="op">&gt;</span> <span class="op">-</span><span class="fl">0.1</span>: <span class="cf">return</span> <span class="st">"other"</span></span>
<span id="cb42-4"><a href=""></a>    <span class="cf">else</span>: <span class="cf">return</span> <span class="st">"democratic"</span></span>
<span id="cb42-5"><a href=""></a></span>
<span id="cb42-6"><a href=""></a>county_df[<span class="st">"class"</span>] <span class="op">=</span> county_df[<span class="st">"Mean_Partisanism"</span>].<span class="bu">apply</span>(set_class)</span>
<span id="cb42-7"><a href=""></a>county_df[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">population</th>
<th data-quarto-table-cell-role="th">HigherEdPercent</th>
<th data-quarto-table-cell-role="th">PCTPOVALL_2019</th>
<th data-quarto-table-cell-role="th">MEDHHINC_2019</th>
<th data-quarto-table-cell-role="th">Unemployment_rate_2019</th>
<th data-quarto-table-cell-role="th">Mean_Partisanism</th>
<th data-quarto-table-cell-role="th">Slope_Partisanism</th>
<th data-quarto-table-cell-role="th">Intercept_Partisanism</th>
<th data-quarto-table-cell-role="th">class</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="4" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>54571</td>
<td>26.571573</td>
<td>12.1</td>
<td>58233.0</td>
<td>2.7</td>
<td>0.467068</td>
<td>0.001845</td>
<td>0.462455</td>
<td>republican</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>182265</td>
<td>31.862459</td>
<td>10.1</td>
<td>59871.0</td>
<td>2.8</td>
<td>0.532724</td>
<td>0.012846</td>
<td>0.500609</td>
<td>republican</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">barbour</td>
<td>27457</td>
<td>11.578713</td>
<td>27.1</td>
<td>35972.0</td>
<td>3.8</td>
<td>0.034259</td>
<td>0.007185</td>
<td>0.016297</td>
<td>other</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bibb</td>
<td>22915</td>
<td>10.378526</td>
<td>20.3</td>
<td>47918.0</td>
<td>3.1</td>
<td>0.453212</td>
<td>0.060381</td>
<td>0.302259</td>
<td>republican</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="distribution-of-class" class="title-slide slide level1 center">
<h1>Distribution of <code>class</code></h1>
<div id="cell-73" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.854599Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.854197Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:22.933123Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:22.932600Z&quot;}" data-execution_count="39">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb43-1"><a href=""></a>county_df[<span class="st">"class"</span>].hist()</span></code></pre></div>
</details>

</div>
<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-40-output-1.png" class="r-stretch"></section>

<section id="checking-for-data-correlations" class="title-slide slide level1 center">
<h1>Checking for data correlations</h1>
<div id="cell-75" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:22.936298Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:22.935096Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:33.561900Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:33.561239Z&quot;}" data-execution_count="40">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb44-1"><a href=""></a>county_df_no_p <span class="op">=</span> county_df[[x <span class="cf">for</span> x <span class="kw">in</span> county_df.columns <span class="cf">if</span> <span class="st">"Partisanism"</span> <span class="kw">not</span> <span class="kw">in</span> x]]</span>
<span id="cb44-2"><a href=""></a>sns.pairplot(county_df_no_p, diag_kind<span class="op">=</span><span class="st">"hist"</span>, hue<span class="op">=</span><span class="st">"class"</span>, markers<span class="op">=</span><span class="st">"."</span>, height<span class="op">=</span><span class="fl">1.5</span>, palette<span class="op">=</span>colors)</span></code></pre></div>
</details>

</div>
<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-41-output-1.png" class="r-stretch"></section>

<section id="using-pca-to-visualize-the-dataset" class="title-slide slide level1 center">
<h1>Using PCA to visualize the dataset</h1>
<div id="cell-78" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:33.890334Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:33.890124Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:34.025534Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:34.024992Z&quot;}" data-execution_count="42">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb45-1"><a href=""></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA</span>
<span id="cb45-2"><a href=""></a></span>
<span id="cb45-3"><a href=""></a>Xs <span class="op">=</span> county_df.drop(columns<span class="op">=</span>[<span class="st">"Mean_Partisanism"</span>, <span class="st">"Slope_Partisanism"</span>, <span class="st">"Intercept_Partisanism"</span>, <span class="st">"class"</span>])</span>
<span id="cb45-4"><a href=""></a>Xs <span class="op">=</span> (Xs <span class="op">-</span>Xs.mean()) <span class="op">/</span> Xs.std()</span>
<span id="cb45-5"><a href=""></a>pca <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb45-6"><a href=""></a>pca.fit(Xs)</span>
<span id="cb45-7"><a href=""></a>Xs_t <span class="op">=</span> pd.DataFrame(pca.transform(Xs), index <span class="op">=</span> Xs.index)</span>
<span id="cb45-8"><a href=""></a>Xs_t.columns <span class="op">=</span> [<span class="st">'PC</span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(Xs_t.columns) <span class="op">+</span> <span class="dv">1</span>)]</span>
<span id="cb45-9"><a href=""></a>Xs_t[:<span class="dv">4</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="42">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">PC1</th>
<th data-quarto-table-cell-role="th">PC2</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">County_Name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="4" data-quarto-table-cell-role="th" data-valign="top">AL</td>
<td data-quarto-table-cell-role="th">autauga</td>
<td>0.842913</td>
<td>-0.480630</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">baldwin</td>
<td>1.421399</td>
<td>-0.079301</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">barbour</td>
<td>-2.467584</td>
<td>0.083543</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bibb</td>
<td>-1.266816</td>
<td>-0.463199</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>

<section id="visualizing-the-data" class="title-slide slide level1 center">
<h1>Visualizing the data</h1>
<div id="cell-81" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:34.036709Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:34.036527Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:34.482290Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:34.481682Z&quot;}" data-execution_count="44">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb46-1"><a href=""></a>Xs_t.plot.scatter(x<span class="op">=</span><span class="st">'PC1'</span>, y<span class="op">=</span><span class="st">'PC2'</span>, c<span class="op">=</span>county_df[<span class="st">"class"</span>].<span class="bu">apply</span>(color), sharex<span class="op">=</span><span class="va">False</span>, colormap <span class="op">=</span><span class="st">'gray'</span>, marker<span class="op">=</span><span class="st">'.'</span>,figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb46-2"><a href=""></a></span>
<span id="cb46-3"><a href=""></a><span class="cf">for</span> i, row <span class="kw">in</span> Xs_t.iterrows():</span>
<span id="cb46-4"><a href=""></a>    <span class="cf">if</span> row.PC1 <span class="op">&gt;</span> <span class="fl">6.5</span> <span class="kw">or</span> row.PC1 <span class="op">&lt;</span> <span class="op">-</span><span class="fl">4.5</span>:</span>
<span id="cb46-5"><a href=""></a>        plt.annotate(i, (row.PC1, row.PC2), size<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb46-6"><a href=""></a>    <span class="cf">elif</span> row.PC2 <span class="op">&lt;</span> <span class="op">-</span><span class="dv">7</span> <span class="kw">or</span> row.PC2 <span class="op">&gt;</span> <span class="fl">3.5</span>:</span>
<span id="cb46-7"><a href=""></a>        plt.annotate(i, (row.PC1 <span class="op">-</span> <span class="dv">1</span>, row.PC2), size<span class="op">=</span><span class="dv">8</span>)</span></code></pre></div>
</details>

</div>
<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-45-output-1.png" class="r-stretch"></section>

<section id="doing-machine-learning" class="title-slide slide level1 center">
<h1>Doing machine learning</h1>
<div id="cell-83" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:34.484429Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:34.484033Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:34.659161Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:34.658492Z&quot;}" data-execution_count="45">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb47-1"><a href=""></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier, plot_tree, export_text</span>
<span id="cb47-2"><a href=""></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb47-3"><a href=""></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb47-4"><a href=""></a></span>
<span id="cb47-5"><a href=""></a><span class="kw">def</span> dtree(county_df, max_depth, print_text<span class="op">=</span><span class="va">False</span>, plot<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb47-6"><a href=""></a>    X <span class="op">=</span> county_df.drop(columns<span class="op">=</span><span class="st">'class'</span>)</span>
<span id="cb47-7"><a href=""></a>    y <span class="op">=</span> county_df[<span class="st">'class'</span>]</span>
<span id="cb47-8"><a href=""></a>    X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.3</span>, random_state<span class="op">=</span><span class="dv">42</span>)  <span class="co"># Split the data into training and testing sets</span></span>
<span id="cb47-9"><a href=""></a>    clf <span class="op">=</span> DecisionTreeClassifier(max_depth<span class="op">=</span>max_depth)  </span>
<span id="cb47-10"><a href=""></a>    clf.fit(X_train, y_train)  <span class="co"># Train the decision tree on the training data</span></span>
<span id="cb47-11"><a href=""></a>    y_pred <span class="op">=</span> clf.predict(X_test)  <span class="co"># Make predictions on the test data</span></span>
<span id="cb47-12"><a href=""></a>    <span class="cf">if</span> plot: plot_tree(clf, feature_names<span class="op">=</span>X.columns, class_names<span class="op">=</span>clf.classes_, filled<span class="op">=</span><span class="va">True</span>, rounded<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb47-13"><a href=""></a>    <span class="cf">if</span> print_text: tree_text <span class="op">=</span> <span class="bu">print</span>(export_text(clf, feature_names<span class="op">=</span><span class="bu">list</span>(X.columns)))</span>
<span id="cb47-14"><a href=""></a>    <span class="cf">return</span> accuracy_score(y_test, y_pred)  <span class="co"># Compute the accuracy</span></span>
<span id="cb47-15"><a href=""></a></span>
<span id="cb47-16"><a href=""></a>dtree(county_df, max_depth<span class="op">=</span><span class="dv">3</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>1.0</code></pre>
</div>

</div>
<img data-src="04-datapreparation-lab_files/figure-revealjs/cell-46-output-2.png" class="r-stretch"></section>

<section id="another-decision-tree" class="title-slide slide level1 center">
<h1>Another decision tree</h1>
<div id="cell-85" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:34.661506Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:34.660932Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:34.677450Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:34.676883Z&quot;}" data-execution_count="46">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb49-1"><a href=""></a>dtree(county_df.drop(columns<span class="op">=</span>[<span class="st">"Mean_Partisanism"</span>, <span class="st">"Slope_Partisanism"</span>, <span class="st">"Intercept_Partisanism"</span>]), max_depth<span class="op">=</span><span class="dv">3</span>, print_text<span class="op">=</span><span class="va">True</span>, plot<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>|--- HigherEdPercent &lt;= 32.32
|   |--- PCTPOVALL_2019 &lt;= 24.15
|   |   |--- population &lt;= 151576.00
|   |   |   |--- class: republican
|   |   |--- population &gt;  151576.00
|   |   |   |--- class: republican
|   |--- PCTPOVALL_2019 &gt;  24.15
|   |   |--- Unemployment_rate_2019 &lt;= 7.15
|   |   |   |--- class: democratic
|   |   |--- Unemployment_rate_2019 &gt;  7.15
|   |   |   |--- class: democratic
|--- HigherEdPercent &gt;  32.32
|   |--- PCTPOVALL_2019 &lt;= 6.75
|   |   |--- population &lt;= 394221.50
|   |   |   |--- class: republican
|   |   |--- population &gt;  394221.50
|   |   |   |--- class: other
|   |--- PCTPOVALL_2019 &gt;  6.75
|   |   |--- population &lt;= 242827.00
|   |   |   |--- class: democratic
|   |   |--- population &gt;  242827.00
|   |   |   |--- class: democratic
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>0.734966592427617</code></pre>
</div>
</div>
<div id="cell-86" class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2025-09-24T15:10:34.679754Z&quot;,&quot;iopub.status.busy&quot;:&quot;2025-09-24T15:10:34.679351Z&quot;,&quot;iopub.status.idle&quot;:&quot;2025-09-24T15:10:34.681864Z&quot;,&quot;shell.execute_reply&quot;:&quot;2025-09-24T15:10:34.681398Z&quot;}" data-execution_count="47">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb52-1"><a href=""></a><span class="co"># Can you do better?</span></span></code></pre></div>
</details>
</div>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Matteo Francia - Machine Learning and Data Mining (Module 2) - A.Y. 2025/26</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="04-datapreparation-lab_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="04-datapreparation-lab_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>